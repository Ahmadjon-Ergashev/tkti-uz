{% extends "base.html" %}
{% load static %}
{% block title %}
    {{ title }}
{% endblock title %}


{% block content %}
    <link rel="stylesheet" href="{% static 'css/styles/posts/posts_list.css' %}">
    <div class="container mt-4">
        <div class="row d-flex justify-content-between py-3">
            <div class="col-12 col-sm-12 col-md-10 col-lg-4 col-xl-4 col-xxl-3">
                {% include "../../widgets/left_sidebar.html" %}
            </div>
            <div class="col-12 col-sm-12 col-md-10 col-lg-8 col-xl-8 col-xxl-8 posts">
                {% if object_list|length == 1 %}
                    {% for object in object_list %}
                    <div class="post_detail">
                            <div class="post_img" id="object_base_img">
                                <img src="{{ object.image.url }}" class="img-fluid" height="500" alt="">
                            </div>
                            <h3>{{ object.title }}</h3>
                            {% if object.video_file %}
                                <div class="post_video">
                                    <video width="100%" controls>
                                        <source src="{{ object.video_file.url }}" type="video/mp4">
                                    </video>
                                </div>
                            {% endif %}
                            {% if object.pdf_file %}
                                <div class="post_pdf mt-3">
                                    <iframe 
                                        src="{{ pdf_file }}" 
                                        width="100%" 
                                        height="700" 
                                        style="border:0;" 
                                        allowfullscreen="" 
                                        loading="lazy" 
                                        referrerpolicy="no-referrer-when-downgrade">
                                    </iframe>
                                    <!-- <embed src="https://fcdc-185-139-139-244.ngrok-free.app/media/posts/pdf-files/2023-09-26/TurgunovZohidilloPythonProgrammer_RESUME.pdf" type="application/pdf" width="100%" height="600px" /> -->
                                </div>
                            {% endif %}
                            {% if object.post %}
                                <div class="post_text mt-3" id="object_post">
                                    {{ object.post.html | safe }}
                                </div>
                            {% endif %}
                        </div>  
                    {% endfor %}
                {% else %}
                    {% if title_slug == 'fakultet' %}
                        <!-- faculty section -->
                            {% for object in object_list %}                          
                                <div class="projcard projcard-blue">
                                    <div class="projcard-innerbox">
                                        <a href="{% url 'post_detail' post_slug=object.slug %}"><img class="projcard-img" src="{{ object.image.url }}" /></a>
                                        <div class="projcard-textbox">
                                            <div class="projcard-title"><a href="{% url 'post_detail' post_slug=object.slug %}">{{ object.title }}</a></div>
                                            <div class="projcard-bar"></div>
                                            <div class="projcard-description">
                                                <ul class="list-group">
                                                    {% for dp in object.departments_set.all %}
                                                        <li class="list-group-item border-0 p-0 py-1" style="background: none;">
                                                            <a href="{% url 'dept_detail' dept_slug=dp.slug %}">{{ dp }}</a>
                                                        </li>
                                                    {% endfor %}
                                                </ul>  
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                    {% else %}
                        <!-- Start Blog Layout -->
                        <div class="row ">
                            {% for object in object_list %}
                                <div class="projcard projcard-blue">
                                    <div class="projcard-innerbox">
                                        <img class="projcard-img" src="{{ object.image.url }}"/>
                                        <div class="projcard-textbox">
                                            <div class="projcard-title">{{ object.title }}</div>
                                            <div class="projcard-bar"></div>
                                            <div class="projcard-description">
                                                {{ object.subtitle }}
                                            </div>
                                            <a class="read_more" href="{% url 'post_detail' post_slug=object.slug %}">{{ read_more }}</a>
                                        </div>
                                    </div>
                                </div>
                            {% empty %}
                                <p class="text-center">
                                    {{ empty }}
                                </p>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
{% endblock content %}
    